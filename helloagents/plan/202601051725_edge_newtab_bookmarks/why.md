# 变更提案: Edge 新标签页书签面板

## 需求背景
当前 Edge 新标签页无法直观展示收藏夹结构，常用书签的访问效率低。

## 产品分析

### 目标用户与场景
- **用户群体:** 频繁使用收藏夹的 Edge 用户
- **使用场景:** 打开新标签页后快速访问常用书签
- **核心痛点:** 收藏夹层级深、入口隐蔽、难以形成快捷导航

### 价值主张与成功指标
- **价值主张:** 用卡片化方式提升书签可见度与访问效率
- **成功指标:** 首屏渲染 < 500ms；200 条书签内交互无明显卡顿

### 人文关怀
尊重用户隐私，所有数据仅在本地处理，不上传网络。

## 变更内容
1. 新标签页以 iOS 主屏幕风格展示书签与文件夹
2. 与 Edge 本地收藏夹双向同步
3. 离线时可展示最近书签快照

## 影响范围
- **模块:** extension-core, bookmark-sync, newtab-ui, storage
- **文件:** manifest.json, src/background/*, src/newtab/*, src/lib/storage.*
- **API:** chrome.bookmarks, chrome.storage
- **数据:** 本地缓存快照与布局状态

## 核心场景

### 需求: bookmark_sync
**模块:** bookmark-sync
实现与 Edge 收藏夹的双向同步。

#### 场景: initial_load
首次打开新标签页。
- 读取书签树并完成渲染

#### 场景: edge_change
Edge 收藏夹发生变化。
- 自动刷新缓存并更新 UI

#### 场景: ui_edit
用户在新标签页内新增/移动/删除书签。
- 应用到 Edge 收藏夹

### 需求: newtab_layout
**模块:** newtab-ui
以卡片方式展示书签与文件夹。

#### 场景: grid_render
渲染 iOS 风格网格布局。
- 书签与文件夹均为卡片
- 保留文件夹层级

#### 场景: folder_card_open
打开文件夹查看内部书签。
- 展示子级列表
- 支持返回上一级

### 需求: offline_cache
**模块:** storage
离线时展示最近书签快照。

#### 场景: offline_render
读取书签失败时。
- 使用缓存渲染
- 提示离线状态

## 风险评估
- **风险:** 书签 API 权限提示影响安装体验
- **缓解:** 仅申请必要权限，提供清晰说明
